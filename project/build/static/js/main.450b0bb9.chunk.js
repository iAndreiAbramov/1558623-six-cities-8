(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t),a.d(t,"api",(function(){return Et}));var r,n,c,s,i=a(1),o=a.n(i),l=a(18),u=a.n(l),d=a(16);!function(e){e.Home="/",e.Favorites="/favorites",e.Login="/login",e.OfferId="/offer/:id",e.Offer="/offer"}(r||(r={})),function(e){e.Auth="AUTH",e.NoAuth="NO_AUTH",e.Unknown="UNKNOWN"}(n||(n={})),function(e){e[e.Ok=200]="Ok",e[e.NoContent=204]="NoContent",e[e.Unauthorised=401]="Unauthorised"}(c||(c={})),function(e){e.InProgress="IN_PROGRESS",e.Success="SUCCESS",e.Error="ERROR",e.Default="SUCCESS"}(s||(s={}));var j,m;!function(e){e.PostSuccess="Your comment successfully posted!",e.PostError="Sorry, your comment wasn't posted!",e.AuthError="Authorization failed. Please enter correct email and password.",e.ConnectionError="Sorry, action can't be performed. Please check your network connection.",e.Unauthorized="Please sign in to perform this action.",e.SignIn="Sign in to get more functions"}(j||(j={})),function(e){e.Favorite="1",e.NotFavorite="0"}(m||(m={}));var p,b={avatarUrl:"../../public/img/avatar.svg",email:"",id:"",isPro:!1,name:""},h={Paris:{name:"Paris",location:{latitude:48.85661,longitude:2.351499,zoom:13}},Cologne:{name:"Cologne",location:{latitude:50.938361,longitude:6.959974,zoom:13}},Brussels:{name:"Brussels",location:{latitude:50.846557,longitude:4.351697,zoom:13}},Amsterdam:{name:"Amsterdam",location:{latitude:52.38310503,longitude:4.893703165,zoom:13}},Hamburg:{name:"Hamburg",location:{latitude:53.550341,longitude:10.000654,zoom:13}},Dusseldorf:{name:"Dusseldorf",location:{latitude:51.225402,longitude:6.776314,zoom:13}}},f="Paris";!function(e){e[e.Perfect=4]="Perfect",e[e.Good=3]="Good",e[e.NotBad=2]="NotBad",e[e.Badly=1]="Badly",e[e.Terribly=0]="Terribly"}(p||(p={}));var _,v=[!1,!1,!1,!1,!1];!function(e){e.Default="./img/pin.svg",e.Active="./img/pin-active.svg"}(_||(_={}));var O,x,g=new d.Icon({iconUrl:_.Default,iconSize:[40,40],iconAnchor:[20,40]}),N=new d.Icon({iconUrl:_.Active,iconSize:[40,40],iconAnchor:[20,40]}),y="cities__place-card",w="near-places__card",k="cities__image-wrapper",C="near-places__image-wrapper";!function(e){e.Popular="Popular",e.PriceUp="Price: low to high",e.PriceDown="Price: high to low",e.RatingDown="Top rated first"}(O||(O={})),function(e){e.Hotels="/hotels",e.Login="/login",e.Logout="/logout",e.Favorite="/favorite",e.Comments="/comments"}(x||(x={}));var S,P=["January","February","March","April","May","June","July","August","September","October","November","December"],F=a(6),D=a(2),H=(a(47),a(7)),I=a(20),A=a(21),E=a(12);!function(e){e.Unknown="common/unknown",e.InitCity="init/initCity",e.SetFetchStatus="data/setFetchStatus",e.SetFavoritesData="data/setFavorites",e.RequireAuthorization="user/requireAuthorization",e.RequireLogout="user/requireLogout",e.SetCurrentUser="user/setCurrentUser",e.SetCurrentHotel="offer/setHotelData",e.SetNearOffersData="offer/setNearOffersData",e.SetCurrentHotelComments="offer/setCurrentHotelComments"}(S||(S={}));var U,z,M=Object(F.b)(S.InitCity,(function(e,t,a){return{payload:{cityData:e,offersData:t,pointsForMap:a}}})),R=Object(F.b)(S.SetFetchStatus,(function(e){return{payload:e}})),L=Object(F.b)(S.RequireAuthorization,(function(e){return{payload:e}})),T=Object(F.b)(S.RequireLogout),B=Object(F.b)(S.SetCurrentUser,(function(e){return{payload:e}})),q=Object(F.b)(S.SetCurrentHotel,(function(e){return{payload:e}})),W=Object(F.b)(S.SetNearOffersData,(function(e){return{payload:e}})),J=Object(F.b)(S.SetCurrentHotelComments,(function(e){return{payload:e}})),G=Object(F.b)(S.SetFavoritesData,(function(e){return{payload:e}})),Y={fetchStatus:s.Default},K=Object(F.c)(Y,(function(e){e.addCase(R,(function(e,t){e.fetchStatus=t.payload}))})),V=Object(F.c)({favoritesData:[]},(function(e){e.addCase(G,(function(e,t){e.favoritesData=t.payload}))})),Z={activeCity:{name:h.Paris.name,location:{latitude:h.Paris.location.latitude,longitude:h.Paris.location.longitude,zoom:h.Paris.location.zoom}},offersData:[],pointsForMap:[]},Q=Object(F.c)(Z,(function(e){e.addCase(M,(function(e,t){e.offersData=t.payload.offersData,e.pointsForMap=t.payload.pointsForMap,e.activeCity={name:t.payload.cityData.name,location:{latitude:t.payload.cityData.location.latitude,longitude:t.payload.cityData.location.longitude,zoom:t.payload.cityData.location.zoom}}}))})),X={currentHotel:{bedrooms:0,city:{location:{latitude:0,longitude:0,zoom:0},name:""},description:"",goods:[""],host:{avatarUrl:"",id:"",isPro:!1,name:""},id:"",images:[""],isFavorite:!1,isPremium:!1,location:{latitude:0,longitude:0,zoom:0},maxAdults:0,previewImage:"",price:0,rating:0,title:"",type:""},nearOffersData:[],currentHotelComments:[]},$=Object(F.c)(X,(function(e){e.addCase(q,(function(e,t){e.currentHotel=t.payload})).addCase(W,(function(e,t){e.nearOffersData=t.payload})).addCase(J,(function(e,t){e.currentHotelComments=t.payload}))})),ee={authorization:n.Unknown,currentUserData:b},te=Object(F.c)(ee,(function(e){e.addCase(L,(function(e,t){e.authorization=t.payload})).addCase(B,(function(e,t){e.currentUserData=t.payload})).addCase(T,(function(e){e.authorization=n.NoAuth}))}));!function(e){e.Favorites="FAVORITES",e.Home="HOME",e.Offer="OFFER",e.Status="STATUS",e.User="USER"}(z||(z={}));var ae=Object(E.c)((U={},Object(A.a)(U,z.Favorites,V),Object(A.a)(U,z.Home,Q),Object(A.a)(U,z.Offer,$),Object(A.a)(U,z.Status,K),Object(A.a)(U,z.User,te),U)),re=function(e){return e[z.User].authorization},ne=function(e){return e[z.User].currentUserData},ce=function(e){return e[z.Status].fetchStatus},se=function(e){return e[z.Offer].currentHotel},ie=function(e){return e[z.Offer].nearOffersData},oe=function(e){return e[z.Offer].currentHotelComments},le=function(e){return e[z.Favorites].favoritesData},ue=function(e){return e[z.Home].activeCity},de=function(e){return e[z.Home].offersData},je=function(e){return e[z.Home].pointsForMap},me=a(0);var pe=function(){return Object(me.jsx)("main",{className:"page__main page__main--favorites page__main--favorites-empty","data-testid":"favorites-empty",children:Object(me.jsx)("div",{className:"page__favorites-container container",children:Object(me.jsxs)("section",{className:"favorites favorites--empty",children:[Object(me.jsx)("h1",{className:"visually-hidden",children:"Favorites (empty)"}),Object(me.jsxs)("div",{className:"favorites__status-wrapper",children:[Object(me.jsx)("b",{className:"favorites__status",children:"Nothing yet saved."}),Object(me.jsx)("p",{className:"favorites__status-description",children:"Save properties to narrow down search or plan your future trips."})]})]})})})},be=a(4),he=a(5),fe=a.n(he),_e=a(13),ve=function(e){var t=Object.assign({},e,{isFavorite:e.is_favorite,isPremium:e.is_premium,maxAdults:e.max_adults,previewImage:e.preview_image},{host:{avatarUrl:e.host.avatar_url,id:e.host.id,isPro:e.host.is_pro,name:e.host.name}});return delete t.is_favorite,delete t.is_premium,delete t.max_adults,delete t.preview_image,delete t.host.is_pro,delete t.host.avatar_url,t},Oe=function(e){return e.map((function(e){return ve(e)}))},xe=function(e){var t=e.email,a=e.id,r=e.name;return{avatarUrl:e.avatar_url,isPro:e.is_pro,email:t,id:a,name:r}},ge=function(e){return e.map((function(e){var t=Object.assign({},e,{user:{avatarUrl:e.user.avatar_url,id:e.user.id,isPro:e.user.is_pro,name:e.user.name}});return delete t.user.avatar_url,delete t.user.is_pro,t}))},Ne=a(10),ye=Object(Ne.a)(),we="six-sities-token",ke=function(){return localStorage.getItem(we)||""},Ce="six-sities-email",Se=a(17),Pe=function(e){return e[function(e,t){var a=Math.ceil(Math.min(e,t)),r=Math.floor(Math.max(e,t));r+=.5;var n=(a-=.5)+Math.random()*(r-a);return Math.round(n)}(0,e.length-1)]},Fe=function(e){return Date.parse(e)},De=function(e){return"".concat(100*Math.round(e)/5,"%")},He=function(e){return e.map((function(e){var t=e.id,a=e.location;return{latitude:a.latitude,longitude:a.longitude,id:t}}))},Ie=function(e){return I.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},Ae=function(e){return function(){var t=Object(_e.a)(fe.a.mark((function t(a,r,n){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(R(s.InProgress)),t.next=3,n.get(x.Hotels).then((function(t){var r=t.data,n=Oe(r).filter((function(t){return t.city.name===e})),c=h[e],s=He(n);a(M(c,n,s))})).then((function(){return a(R(s.Success))})).catch((function(){return a(R(s.Error))}));case 3:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()},Ee=function(e){return function(){var t=Object(_e.a)(fe.a.mark((function t(a,r,n){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(R(s.InProgress)),t.next=3,n.get("".concat(x.Hotels,"/").concat(e)).then((function(e){var t=e.data;a(q(ve(t))),a(R(s.Success))})).catch((function(){Ie(j.ConnectionError),a(R(s.Error))}));case 3:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()},Ue=function(){return function(){var e=Object(_e.a)(fe.a.mark((function e(t,a,r){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(R(s.InProgress)),e.next=3,r.get(x.Favorite).then((function(e){var a=e.data;t(G(Oe(a))),t(R(s.Success))})).catch((function(){t(R(s.Error)),Ie(j.ConnectionError)}));case 3:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()};var ze=function(){var e=Object(D.b)(),t=Object(D.c)(ue).name;return Object(me.jsx)("footer",{className:"footer container","data-testid":"favorites-footer",children:Object(me.jsx)(be.a,{className:"footer__logo-link",to:r.Home,onClick:function(){return e(Ae(t))},children:Object(me.jsx)("img",{className:"footer__logo",src:"./img/logo.svg",alt:"6 cities logo",width:"64",height:"33"})})})},Me=a(8);var Re=function(e){var t=e.isFavorite,a=e.offerId,r=e.handleBookmarkClick,n=t?"place-card__bookmark-button place-card__bookmark-button--active button":"place-card__bookmark-button button";return Object(me.jsxs)("button",{className:n,type:"button",onClick:function(){return r(a)},children:[Object(me.jsx)("svg",{className:"place-card__bookmark-icon",width:"18",height:"19",children:Object(me.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(me.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})},Le=a(30),Te=a.n(Le),Be="https://8.react.pages.academy/six-cities",qe=function(){var e=Te.a.create({baseURL:Be,timeout:5e3});return e.interceptors.request.use((function(e){var t=ke();return t&&(e.headers["x-token"]=t),e})),e},We=qe();var Je=function(e){return function(t){var a=ye,n=Object(D.b)(),s=t.isFavorite,o=t.offerId,l=Object(i.useState)(s),u=Object(Me.a)(l,2),d=u[0],p=u[1],b=function(){var e=Object(_e.a)(fe.a.mark((function e(t){var s;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d?m.NotFavorite:m.Favorite,e.next=3,We.post("".concat(x.Favorite,"/").concat(t,"/").concat(s)).then((function(e){var t=e.data;p(ve(t).isFavorite),a.location.pathname===r.Favorites&&n(Ue())})).catch((function(e){var t=e.response;(null===t||void 0===t?void 0:t.status)===c.Unauthorised?(Ie(j.Unauthorized),a.push(r.Login)):Ie(j.ConnectionError)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(me.jsx)(e,{isFavorite:d,offerId:o,handleBookmarkClick:b})}},Ge=Je(Re);var Ye=function(e){var t=Object(D.b)(),a=e.data,n=a.price,c=a.rating,s=a.id,i=a.type,o=a.title,l=a.previewImage,u=a.isFavorite,d=a.isPremium,j="".concat(100*c/5,"%");return Object(me.jsxs)("article",{className:"favorites__card place-card",children:[d&&Object(me.jsx)("div",{className:"place-card__mark",children:Object(me.jsx)("span",{children:"Premium"})}),Object(me.jsx)("div",{className:"favorites__image-wrapper place-card__image-wrapper",children:Object(me.jsx)(be.a,{to:"".concat(r.Offer,"/").concat(s),onClick:function(){return t(Ee(s))},children:Object(me.jsx)("img",{className:"place-card__image",src:l,width:"150",height:"110",alt:"Place view"})})}),Object(me.jsxs)("div",{className:"favorites__card-info place-card__info",children:[Object(me.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(me.jsxs)("div",{className:"place-card__price",children:[Object(me.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",n]}),Object(me.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(me.jsx)(Ge,{isFavorite:u,offerId:s,handleBookmarkClick:function(){return null}})]}),Object(me.jsx)("div",{className:"place-card__rating rating",children:Object(me.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(me.jsx)("span",{style:{width:j}}),Object(me.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(me.jsx)("h2",{className:"place-card__name",children:Object(me.jsx)(be.a,{to:"".concat(r.Offer,"/").concat(s),onClick:function(){return t(Ee(s))},children:o})}),Object(me.jsx)("p",{className:"place-card__type",children:i})]})]})};var Ke=function(e){var t=Object(D.b)(),a=e.cityName,r=e.data.map((function(e){return Object(me.jsx)(Ye,{data:e},e.id)}));return Object(me.jsxs)("li",{className:"favorites__locations-items",children:[Object(me.jsx)("div",{className:"favorites__locations locations locations--current",children:Object(me.jsx)("div",{className:"locations__item",children:Object(me.jsx)(be.a,{className:"locations__item-link",to:"/","data-testid":"favorites-home-link",onClick:function(){return t(Ae(a))},children:Object(me.jsx)("span",{children:a})})})}),Object(me.jsx)("div",{className:"favorites__places",children:r})]})};var Ve=function(e){var t=function(e){var t={};return e.forEach((function(e){var a=e.city.name;a in t?t[a].push(e):t[a]=[e]})),t}(e.favoritesData),a=Object.entries(t).sort((function(e,t){return t[0]>e[0]?-1:1})).map((function(e){var t=Object(Me.a)(e,2),a=t[0],r=t[1];return Object(me.jsx)(Ke,{cityName:a,data:r},a)}));return Object(me.jsx)("main",{className:"page__main page__main--favorites","data-testid":"favorites-main",children:Object(me.jsx)("div",{className:"page__favorites-container container",children:Object(me.jsxs)("section",{className:"favorites",children:[Object(me.jsx)("h1",{className:"favorites__title",children:"Saved listing"}),Object(me.jsx)("ul",{className:"favorites__list",children:a})]})})})};var Ze=function(){var e=Object(D.b)(),t=Object(D.c)(ue).name;return Object(me.jsx)("div",{className:"header__left",children:Object(me.jsx)(be.a,{to:r.Home,className:"header__logo-link header__logo-link--active",onClick:function(){return e(Ae(t))},"data-testid":"header-logo",children:Object(me.jsx)("img",{className:"header__logo",src:"./img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})})};var Qe=function(){return Object(me.jsx)("nav",{className:"header__nav",children:Object(me.jsx)("ul",{className:"header__nav-list",children:Object(me.jsx)("li",{className:"header__nav-item user",children:Object(me.jsxs)(be.a,{to:r.Login,className:"header__nav-link header__nav-link--profile",children:[Object(me.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(me.jsx)("span",{className:"header__login",children:"Sign in"})]})})})})};var Xe=function(){var e=Object(D.c)(ne).email,t=Object(D.b)(),a=e||(localStorage.getItem(Ce)||"");return Object(me.jsx)("nav",{className:"header__nav",children:Object(me.jsxs)("ul",{className:"header__nav-list",children:[Object(me.jsx)("li",{className:"header__nav-item user",children:Object(me.jsxs)(be.a,{className:"header__nav-link header__nav-link--profile",to:r.Favorites,onClick:function(){return t(Ue())},children:[Object(me.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(me.jsx)("span",{className:"header__user-name user__name",children:a})]})}),Object(me.jsx)("li",{className:"header__nav-item",onClick:function(){return t(function(){var e=Object(_e.a)(fe.a.mark((function e(t,a,r){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.delete(x.Logout).then((function(){t(L(n.NoAuth)),localStorage.removeItem(we),localStorage.removeItem(Ce),t(B(b))}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}())},children:Object(me.jsx)(be.a,{to:"/",className:"header__nav-link",children:Object(me.jsx)("span",{className:"header__signout",children:"Sign out"})})})]})})};var $e=function(){var e=Object(D.c)(re);return Object(me.jsx)("header",{className:"header","data-testid":"header",children:Object(me.jsx)("div",{className:"container",children:Object(me.jsxs)("div",{className:"header__wrapper",children:[Object(me.jsx)(Ze,{}),e===n.Auth?Object(me.jsx)(Xe,{}):Object(me.jsx)(Qe,{})]})})})};a(70);var et=function(){return Object(me.jsx)("div",{className:"spinner-offer-overlay",children:Object(me.jsx)("div",{className:"spinner-offer-wrapper",children:Object(me.jsx)("div",{className:"spinner-offer",children:Object(me.jsx)("span",{className:"visually-hidden",children:"Please wait. Loading in progress."})})})})};a(71);var tt=function(){return Object(me.jsxs)("div",{className:"not-found-message-wrapper","data-testid":"not-found-page-wrapper",children:[Object(me.jsx)("p",{className:"not-found-title",children:"Error 404."}),Object(me.jsx)("p",{className:"not-found-message",children:"Requested page not found."}),Object(me.jsx)(be.a,{className:"not-found-link",to:r.Home,children:"Return to main page"})]})};var at=function(){var e=Object(D.c)(le),t=Object(D.c)(ce),a=0===e.length,r=a?"page page--favorites-empty":"page",n=a?Object(me.jsx)(pe,{}):Object(me.jsx)(Ve,{favoritesData:e});return Object(me.jsxs)("div",{className:r,children:[t===s.InProgress&&Object(me.jsx)(et,{}),t===s.Success&&Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)($e,{}),n,Object(me.jsx)(ze,{})]}),t===s.Error&&Object(me.jsx)(tt,{})]})};var rt=function(){return Object(me.jsx)("span",{style:{width:"100%",textAlign:"center",fontSize:"26px",fontStyle:"italic",lineHeight:"1.4"},children:"Failed to get data from server. Please check your network connection and try to reload the page."})};function nt(e){var t=e.clickHandler,a=e.sortOption;return Object(me.jsxs)("span",{onClick:t,className:"places__sorting-type",tabIndex:0,"data-testid":"home-list-sort-dropdown",children:[a,Object(me.jsx)("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:Object(me.jsx)("use",{xlinkHref:"#icon-arrow-select"})})]})}var ct=o.a.memo(nt);var st=function(e){var t=e.clickHandler;return Object(me.jsxs)("ul",{className:"places__options places__options--custom places__options--opened",children:[Object(me.jsx)("li",{onClick:function(){return t(O.Popular)},className:"places__option places__option--active",tabIndex:0,children:"Popular"}),Object(me.jsx)("li",{onClick:function(){return t(O.PriceUp)},className:"places__option",tabIndex:0,children:"Price: low to high"}),Object(me.jsx)("li",{onClick:function(){return t(O.PriceDown)},className:"places__option",tabIndex:0,children:"Price: high to low"}),Object(me.jsx)("li",{onClick:function(){return t(O.RatingDown)},className:"places__option",tabIndex:0,children:"Top rated first"})]})},it=Je(Re);var ot=function(e){var t=Object(D.b)(),a=e.data,n=e.onActiveCardChange,c=e.articleClass,s=e.imgWrapperClass,i=a.id,o=a.price,l=a.rating,u=a.title,d=a.previewImage,j=a.type,m=a.isPremium,p=a.isFavorite,b=De(l);return Object(me.jsxs)("article",{"data-testid":"offer-card",className:"".concat(c," place-card"),onMouseEnter:function(){return n&&n(i)},onMouseLeave:function(){return n&&n("")},children:[m&&Object(me.jsx)("div",{className:"place-card__mark",children:Object(me.jsx)("span",{children:"Premium"})}),Object(me.jsx)("div",{className:"".concat(s," place-card__image-wrapper"),children:Object(me.jsx)(be.a,{to:"".concat(r.Offer,"/").concat(i),onClick:function(){return t(Ee(i))},children:Object(me.jsx)("img",{className:"place-card__image",src:d,width:"260",height:"200",alt:"Place view"})})}),Object(me.jsxs)("div",{className:"place-card__info",children:[Object(me.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(me.jsxs)("div",{className:"place-card__price",children:[Object(me.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",o]}),Object(me.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(me.jsx)(it,{isFavorite:p,offerId:i,handleBookmarkClick:function(){return null}})]}),Object(me.jsx)("div",{className:"place-card__rating rating",children:Object(me.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(me.jsx)("span",{style:{width:b}}),Object(me.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(me.jsx)("h2",{className:"place-card__name",children:Object(me.jsx)(be.a,{to:"".concat(r.Offer,"/").concat(i),onClick:function(){return t(Ee(i))},children:u})}),Object(me.jsx)("p",{className:"place-card__type",children:j})]})]})};a(72);var lt=function(){return Object(me.jsx)("div",{className:"spinner-home-overlay",children:Object(me.jsx)("div",{className:"spinner-home-wrapper",children:Object(me.jsx)("div",{className:"spinner-home",children:Object(me.jsx)("span",{className:"visually-hidden",children:"Please wait. Loading in progress."})})})})};var ut=function(e){var t=Object(D.c)(ce),a=Object(D.c)(ue).name,r=e.offersData,n=e.onActiveCardChange,c=Object(i.useState)(!1),o=Object(Me.a)(c,2),l=o[0],u=o[1],d=Object(i.useState)(O.Popular),j=Object(Me.a)(d,2),m=j[0],p=j[1],b=Object(i.useState)(Object(Se.a)(r)),h=Object(Me.a)(b,2),f=h[0],_=h[1];Object(i.useEffect)((function(){_(function(e,t){switch(t){case O.PriceUp:return Object(Se.a)(e).sort((function(e,t){return e.price-t.price}));case O.PriceDown:return Object(Se.a)(e).sort((function(e,t){return t.price-e.price}));case O.RatingDown:return Object(Se.a)(e).sort((function(e,t){return t.rating-e.rating}));default:return Object(Se.a)(e)}}(Object(Se.a)(r),m))}),[r,m]);var v=f.map((function(e){var t=e.id;return Object(me.jsx)(ot,{data:e,onActiveCardChange:n,articleClass:y,imgWrapperClass:k},t)})),x=Object(i.useCallback)((function(){u((function(e){return!e}))}),[]),g=Object(i.useCallback)((function(e){u((function(e){return!e})),p(e)}),[]);return Object(me.jsxs)("section",{className:"cities__places places","data-testid":"home-list",children:[t===s.InProgress&&Object(me.jsx)(lt,{}),t===s.Error&&Object(me.jsx)(rt,{}),t===s.Success&&Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(me.jsxs)("b",{className:"places__found",children:[r.length," places to stay in ",a]}),Object(me.jsxs)("form",{className:"places__sorting",action:"#",method:"get",children:[Object(me.jsx)("span",{className:"places__sorting-caption",children:"Sort by"}),Object(me.jsx)(ct,{sortOption:m,clickHandler:x}),l&&Object(me.jsx)(st,{clickHandler:g})]}),Object(me.jsx)("div",{className:"cities__places-list places__list tabs__content",style:{position:"relative"},children:v})]})]})};a(39);var dt=function(e,t){var a=Object(i.useState)(null),r=Object(Me.a)(a,2),n=r[0],c=r[1],s=t.latitude,o=t.longitude,l=t.zoom;return Object(i.useEffect)((function(){if(null!==n&&n.flyTo([s,o],l),null!==e.current&&null===n){var t=new d.Map(e.current,{center:[s,o],zoom:l,scrollWheelZoom:!1}),a=new d.TileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'});t.addLayer(a),c(t)}}),[e,n,s,o,l]),n};var jt=function(e){var t=e.activeCardId,a=e.cityLocation,r=e.pointsForMap,n=Object(i.useRef)(null),c=dt(n,a),s=[];return Object(i.useEffect)((function(){if(c)return r.forEach((function(e){var a=new d.Marker({lat:e.latitude,lng:e.longitude});a.setIcon(t&&t===e.id?N:g).addTo(c),s.push(a)})),function(){return s.forEach((function(e){return e.removeFrom(c)}))}})),Object(me.jsx)("div",{className:"cities__right-section","data-testid":"home-map",children:Object(me.jsx)("section",{className:"cities__map map",ref:n})})};var mt=function(e){var t=Object(D.c)(ue).name,a=Object(D.b)(),r=e.name,n=r.toLowerCase()===t.toLowerCase()?"locations__item-link tabs__item tabs__item--active":"locations__item-link tabs__items";return Object(me.jsx)(be.a,{className:n,to:"/",onClick:function(){return a(Ae(r))},children:Object(me.jsx)("span",{children:r})})};function pt(){var e=Object.keys(h).map((function(e){return Object(me.jsx)("li",{className:"locations__item",children:Object(me.jsx)(mt,{name:e})},e)}));return Object(me.jsx)("div",{className:"tabs","data-testid":"home-tabs",children:Object(me.jsx)("section",{className:"locations container",children:Object(me.jsx)("ul",{className:"locations__list tabs__list",children:e})})})}var bt=o.a.memo(pt);var ht=function(e){var t=e.activeCityName;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("section",{className:"cities__no-places",children:Object(me.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(me.jsx)("b",{className:"cities__status",children:"No places to stay available"}),Object(me.jsxs)("p",{className:"cities__status-description",children:["We could not find any property available at the moment in ",t]})]})}),Object(me.jsx)("div",{className:"cities__right-section"})]})};var ft=function(){var e=Object(D.c)(ce),t=Object(D.c)(de),a=Object(D.c)(ue).name,r=Object(D.c)(ue).location,n=Object(D.c)(je),c=Object(D.b)(),o=Object(i.useState)(""),l=Object(Me.a)(o,2),u=l[0],d=l[1],j=t.length>0?"cities__places-container container":"cities__places-container cities__places-container--empty container",m=t.length>0?"page__main page__main--index":"page__main page__main--index page__main--index-empty";Object(i.useEffect)((function(){t===[]&&c(Ae(a))}),[a,c,t]);var p=Object(i.useCallback)((function(e){return d(e)}),[]);return Object(me.jsxs)("main",{className:m,children:[Object(me.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(me.jsx)(bt,{}),Object(me.jsx)("div",{className:"cities",children:Object(me.jsxs)("div",{className:j,children:[0===t.length&&e===s.Success&&Object(me.jsx)(ht,{activeCityName:a}),t.length>0&&Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(ut,{offersData:t,onActiveCardChange:p}),Object(me.jsx)(jt,{activeCardId:u,cityLocation:r,pointsForMap:n})]})]})})]})};var _t=function(){return Object(me.jsxs)("div",{className:"page page--gray page--main",children:[Object(me.jsx)($e,{}),Object(me.jsx)(ft,{})]})};var vt=function(){var e=Object(D.b)(),t=Object(i.useState)(""),a=Object(Me.a)(t,2),r=a[0],c=a[1],s=Object(i.useState)(""),o=Object(Me.a)(s,2),l=o[0],u=o[1];return Object(me.jsxs)("form",{className:"login__form form",action:"#",method:"post",children:[Object(me.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(me.jsx)("label",{className:"visually-hidden",children:"E-mail"}),Object(me.jsx)("input",{className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0,value:r,onInput:function(e){e.preventDefault(),c(e.currentTarget.value)},"data-testid":"email"})]}),Object(me.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(me.jsx)("label",{className:"visually-hidden",children:"Password"}),Object(me.jsx)("input",{className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0,value:l,onInput:function(e){e.preventDefault(),u(e.currentTarget.value.trimLeft())},"data-testid":"password"})]}),Object(me.jsx)("button",{className:"login__submit form__submit button",type:"submit",onClick:function(t){var a;t.preventDefault(),e((a={email:r,password:l},function(){var e=Object(_e.a)(fe.a.mark((function e(t,r,c){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.post(x.Login,a).then((function(e){var a,r,c=e.data;t(L(n.Auth)),a=c.token,localStorage.setItem(we,a),r=c.email,localStorage.setItem(Ce,r),t(B(xe(c))),ye.push("/")})).catch((function(){return Ie(j.AuthError)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()))},children:"Sign in"})]})};var Ot=function(){var e=Pe(Object.keys(h)),t=Object(D.b)();return Object(me.jsxs)("div",{className:"page page--gray page--login",children:[Object(me.jsx)("header",{className:"header","data-testid":"login-header",children:Object(me.jsx)("div",{className:"container",children:Object(me.jsx)("div",{className:"header__wrapper",children:Object(me.jsx)(Ze,{})})})}),Object(me.jsx)("main",{className:"page__main page__main--login","data-testid":"login-main",children:Object(me.jsxs)("div",{className:"page__login-container container",children:[Object(me.jsxs)("section",{className:"login",children:[Object(me.jsx)("h1",{className:"login__title",children:"Sign in"}),Object(me.jsx)(vt,{})]}),Object(me.jsx)("section",{className:"locations locations--login locations--current",children:Object(me.jsx)("div",{className:"locations__item",children:Object(me.jsx)(be.a,{className:"locations__item-link",to:"/",onClick:function(){return t(Ae(e))},"data-testid":"random-link",children:Object(me.jsx)("span",{children:e})})})})]})})]})};var xt=function(e){var t=e.images.map((function(e,t){return Object(me.jsx)("div",{className:"property__image-wrapper",children:Object(me.jsx)("img",{className:"property__image",src:e,alt:"Interior view"})},e+t.toString())}));return Object(me.jsx)("div",{className:"property__gallery-container container",children:Object(me.jsx)("div",{className:"property__gallery",children:t})})};var gt=function(e){var t=e.goods.map((function(e){return Object(me.jsx)("li",{className:"property__inside-item",children:e},e)}));return Object(me.jsxs)("div",{className:"property__inside",children:[Object(me.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),Object(me.jsx)("ul",{className:"property__inside-list",children:t})]})};var Nt=function(e){var t=e.host,a=t.name,r=t.avatarUrl,n=t.isPro,c=n?"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper":"property__avatar-wrapper user__avatar-wrapper";return Object(me.jsxs)("div",{className:"property__host",children:[Object(me.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),Object(me.jsxs)("div",{className:"property__host-user user",children:[Object(me.jsx)("div",{className:c,children:Object(me.jsx)("img",{className:"property__avatar user__avatar",src:r,width:"74",height:"74",alt:"Host avatar"})}),Object(me.jsx)("span",{className:"property__user-name",children:a}),n&&Object(me.jsx)("span",{className:"property__user-status",children:"Pro"})]}),Object(me.jsxs)("div",{className:"property__description",children:[Object(me.jsx)("p",{className:"property__text",children:"A quiet cozy and picturesque that hides behind a a river by the unique lightness of Amsterdam. The building is green and from 18th century."}),Object(me.jsx)("p",{className:"property__text",children:"An independent House, strategically located between Rembrand Square and National Opera, but where the bustle of the city comes to rest in this alley flowery and colorful."})]})]})};var yt=function(e){var t=e.cityLocation,a=e.nearbyPoints,r=e.currentPoint,n=Object(i.useRef)(null),c=dt(n,t);return Object(i.useEffect)((function(){if(c){var e=[];a.forEach((function(t){var a=new d.Marker([t.latitude,t.longitude]);e.push(a),a.setIcon(g).addTo(c)}));var t=new d.Marker([r.latitude,r.longitude]);return t.setIcon(N).addTo(c),function(){e.forEach((function(e){return e.removeFrom(c)})),t.removeFrom(c)}}})),Object(me.jsx)("section",{className:"property__map map",ref:n,"data-testid":"offer-map"})};var wt=function(e){var t=e.nearOffersData.map((function(e){return Object(me.jsx)(ot,{data:e,articleClass:w,imgWrapperClass:C},e.id)}));return Object(me.jsx)("div",{className:"container",children:Object(me.jsxs)("section",{className:"near-places places",children:[Object(me.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),Object(me.jsx)("div",{className:"near-places__list places__list",children:t})]})})};var kt=function(e){var t=e.commentData,a=t.date,r=t.rating,n=t.user,c=t.comment,s=De(r),i=new Date(a),o="".concat(P[i.getMonth()]," ").concat(i.getFullYear()),l="".concat(i.getFullYear(),"-").concat(i.getMonth()+1,"-").concat(i.getDate());return Object(me.jsxs)("li",{className:"reviews__item",children:[Object(me.jsxs)("div",{className:"reviews__user user",children:[Object(me.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:Object(me.jsx)("img",{className:"reviews__avatar user__avatar",src:n.avatarUrl,width:"54",height:"54",alt:"Reviews avatar"})}),Object(me.jsx)("span",{className:"reviews__user-name",children:n.name})]}),Object(me.jsxs)("div",{className:"reviews__info",children:[Object(me.jsx)("div",{className:"reviews__rating rating",children:Object(me.jsxs)("div",{className:"reviews__stars rating__stars",children:[Object(me.jsx)("span",{style:{width:s}}),Object(me.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(me.jsx)("p",{className:"reviews__text",children:c}),Object(me.jsx)("time",{className:"reviews__time",dateTime:l,children:o})]})]})};var Ct=function(e){var t,a=e.commentsData,r=(t=a,t.slice().sort((function(e,t){return Fe(e.date)-Fe(t.date)})).slice(-10)).map((function(e){return Object(me.jsx)(kt,{commentData:e},e.id)}));return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7 ",Object(me.jsx)("span",{className:"reviews__amount",children:r.length})]}),Object(me.jsx)("ul",{className:"reviews__list",children:r})]})};var St=function(e){var t=Object(D.b)(),a=e.id,r=Object(i.useState)(v),n=Object(Me.a)(r,2),c=n[0],s=n[1],o=Object(i.useState)(""),l=Object(Me.a)(o,2),u=l[0],d=l[1],m=Object(i.useState)(!0),b=Object(Me.a)(m,2),h=b[0],f=b[1],_=qe();Object(i.useEffect)((function(){c.every((function(e){return!e}))||u.length<50?f(!0):f(!1)}),[c,u]);var O=function(e){s((function(){var t=Object(Se.a)(v);return t[+e.target.value-1]=!0,t}))},g=function(){var e=Object(_e.a)(fe.a.mark((function e(t,a){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.post("".concat(x.Comments,"/").concat(a),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(me.jsxs)("form",{className:"reviews__form form",action:"#",method:"post",onSubmit:function(e){e.preventDefault(),f(!0);var r={comment:u,rating:c.findIndex((function(e){return e}))+1};g(r,a).then((function(e){var a,r=e.data;t(J(ge(r))),s(v),d(""),a=j.PostSuccess,I.b.success(a,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(){f(!1),Ie(j.PostError)}))},children:[Object(me.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),Object(me.jsxs)("div",{className:"reviews__rating-form form__rating",children:[Object(me.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:"5",id:"5-stars",type:"radio",checked:c[p.Perfect],onChange:O}),Object(me.jsx)("label",{htmlFor:"5-stars",className:"reviews__rating-label form__rating-label",title:"perfect",children:Object(me.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(me.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(me.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:"4",id:"4-stars",type:"radio",checked:c[p.Good],onChange:O}),Object(me.jsx)("label",{htmlFor:"4-stars",className:"reviews__rating-label form__rating-label",title:"good",children:Object(me.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(me.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(me.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:"3",id:"3-stars",type:"radio",checked:c[p.NotBad],onChange:O}),Object(me.jsx)("label",{htmlFor:"3-stars",className:"reviews__rating-label form__rating-label",title:"not bad",children:Object(me.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(me.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(me.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:"2",id:"2-stars",type:"radio",checked:c[p.Badly],onChange:O}),Object(me.jsx)("label",{htmlFor:"2-stars",className:"reviews__rating-label form__rating-label",title:"badly",children:Object(me.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(me.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(me.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:"1",id:"1-star",type:"radio",checked:c[p.Terribly],onChange:O}),Object(me.jsx)("label",{htmlFor:"1-star",className:"reviews__rating-label form__rating-label",title:"terribly",children:Object(me.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(me.jsx)("use",{xlinkHref:"#icon-star"})})})]}),Object(me.jsx)("textarea",{className:"reviews__textarea form__textarea",id:"review",name:"review",placeholder:"Tell how was your stay, what you like and what can be improved",value:u,onChange:function(e){e.preventDefault(),d((function(){return e.target.value}))}}),Object(me.jsxs)("div",{className:"reviews__button-wrapper",children:[Object(me.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set",Object(me.jsx)("span",{className:"reviews__star",children:"rating"}),"and describe your stay with at least",Object(me.jsx)("b",{className:"reviews__text-amount",children:"50 characters"}),"."]}),Object(me.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",disabled:h,children:"Submit"})]})]})};var Pt=function(e){var t=Object(D.c)(oe),a=Object(D.c)(re),r=Object(D.b)(),c=e.id;return Object(i.useEffect)((function(){r(function(e){return function(){var t=Object(_e.a)(fe.a.mark((function t(a,r,n){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get("".concat(x.Comments,"/").concat(e)).then((function(e){var t=e.data;a(J(ge(t)))}));case 2:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()}(c))}),[c,r]),Object(me.jsxs)("section",{className:"property__reviews reviews",children:[t.length>0&&Object(me.jsx)(Ct,{commentsData:t}),a===n.Auth&&Object(me.jsx)(St,{id:c})]})},Ft=Je((function(e){var t=e.isFavorite,a=e.offerId,r=e.handleBookmarkClick,n=t?"property__bookmark-button property__bookmark-button--active button":"property__bookmark-button button";return Object(me.jsxs)("button",{className:n,type:"button",onClick:function(){return r(a)},children:[Object(me.jsx)("svg",{className:"property__bookmark-icon",width:"31",height:"33",children:Object(me.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(me.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})}));var Dt=function(){var e=Object(D.c)(se),t=Object(D.c)(ie),a=Object(D.b)(),r=e.isFavorite,n=e.isPremium,c=e.host,s=e.price,o=e.rating,l=e.bedrooms,u=e.maxAdults,d=e.type,j=e.images,m=e.goods,p=e.city,b=e.id,h=e.title,f=De(o),_=t.map((function(e){return{latitude:e.location.latitude,longitude:e.location.longitude,id:e.id}})),v={latitude:e.location.latitude,longitude:e.location.longitude,id:e.id},O=Object(H.g)().id;return Object(i.useEffect)((function(){!b&&a(Ee(O)),a(function(e){return function(){var t=Object(_e.a)(fe.a.mark((function t(a,r,n){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get("".concat(x.Hotels,"/").concat(e,"/nearby")).then((function(e){var t=e.data;a(W(Oe(t)))}));case 2:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()}(O))}),[a,O,b]),Object(me.jsxs)("main",{className:"page__main page__main--property","data-testid":"offer-main",children:[Object(me.jsxs)("section",{className:"property",children:[j.length>0&&Object(me.jsx)(xt,{images:j.slice(0,6)}),Object(me.jsx)("div",{className:"property__container container",children:Object(me.jsxs)("div",{className:"property__wrapper",children:[n&&Object(me.jsx)("div",{className:"property__mark",children:Object(me.jsx)("span",{children:"Premium"})}),Object(me.jsxs)("div",{className:"property__name-wrapper",children:[Object(me.jsx)("h1",{className:"property__name",children:h}),Object(me.jsx)(Ft,{isFavorite:r,offerId:b,handleBookmarkClick:function(){return null}})]}),Object(me.jsxs)("div",{className:"property__rating rating",children:[Object(me.jsxs)("div",{className:"property__stars rating__stars",children:[Object(me.jsx)("span",{style:{width:f}}),Object(me.jsx)("span",{className:"visually-hidden",children:"Rating"})]}),Object(me.jsx)("span",{className:"property__rating-value rating__value",children:o})]}),Object(me.jsxs)("ul",{className:"property__features",children:[Object(me.jsx)("li",{className:"property__feature property__feature--entire",children:d}),Object(me.jsxs)("li",{className:"property__feature property__feature--bedrooms",children:[l," Bedrooms"]}),Object(me.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",u," adults"]})]}),Object(me.jsxs)("div",{className:"property__price",children:[Object(me.jsxs)("b",{className:"property__price-value",children:["\u20ac",s]}),Object(me.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),m.length>0&&Object(me.jsx)(gt,{goods:m}),Object(me.jsx)(Nt,{host:c}),Object(me.jsx)(Pt,{id:O})]})}),Object(me.jsx)(yt,{cityLocation:p.location,nearbyPoints:_,currentPoint:v})]}),t.length>0&&Object(me.jsx)(wt,{nearOffersData:t})]})};var Ht=function(){var e=Object(D.c)(ce);return Object(me.jsxs)("div",{className:"page",children:[e===s.InProgress&&Object(me.jsx)(et,{}),e===s.Success&&Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)($e,{}),Object(me.jsx)(Dt,{})]}),e===s.Error&&Object(me.jsx)(tt,{})]})};var It=function(e){var t=Object(D.c)(re),a=e.path,c=e.exact,s=e.render;return Object(me.jsx)(H.b,{path:a,exact:c,render:function(){return t===n.Auth?s():Object(me.jsx)(H.a,{to:r.Login})}})};var At=function(){return Object(me.jsxs)(H.d,{children:[Object(me.jsx)(H.b,{path:r.Home,exact:!0,children:Object(me.jsx)(_t,{})}),Object(me.jsx)(H.b,{path:r.Login,exact:!0,children:Object(me.jsx)(Ot,{})}),Object(me.jsx)(It,{exact:!0,path:r.Favorites,render:function(){return Object(me.jsx)(at,{})}}),Object(me.jsx)(H.b,{path:r.OfferId,exact:!0,children:Object(me.jsx)(Ht,{})}),Object(me.jsx)(H.b,{children:Object(me.jsx)(tt,{})})]})},Et=function(e){var t=Te.a.create({baseURL:Be,timeout:5e3});return t.interceptors.request.use((function(e){var t=ke();return t&&(e.headers["x-token"]=t),e})),t.interceptors.response.use((function(e){return e}),(function(t){var a=t.response;return(null===a||void 0===a?void 0:a.status)===c.Unauthorised&&e(),Promise.reject(t)})),t}((function(){return Ut.dispatch(L(n.NoAuth))})),Ut=Object(F.a)({reducer:ae,middleware:function(e){return e({thunk:{extraArgument:Et}})}});Ut.dispatch(function(){var e=Object(_e.a)(fe.a.mark((function e(t,a,r){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get(x.Login).then((function(){t(L(n.Auth))})).catch((function(){var e;t(L(n.NoAuth)),e=j.SignIn,I.b.info(e,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()),Ut.dispatch(Ae(f)),u.a.render(Object(me.jsx)(o.a.StrictMode,{children:Object(me.jsx)(D.a,{store:Ut,children:Object(me.jsxs)(H.c,{history:ye,children:[Object(me.jsx)(I.a,{}),Object(me.jsx)(At,{})]})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.450b0bb9.chunk.js.map